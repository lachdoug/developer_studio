<%= custom_form_for @app.blueprint.external_repositories,
      url: app_blueprint_external_repositories_path(app_id: @app.name) do |f| %>
<table class="table">
  <tr><th>URL</th><th>Key</th><th width="1"></th></tr>
  <%= f.simple_fields_for :external_repositories do |ff| %>
  <tr>
    <%= ff.input :url, as: :url, required: true, wrapper: :table_cell_input %>
    <%= ff.input :key, wrapper: :table_cell_input %>
    <td>
      <div class='clearfix'>
      <%= link_to icon('fa-trash-o'),
        app_blueprint_external_repositories_external_repository_path(app_id: @app.name, id: ff.index),
        method: :delete, remote: true,
        class: 'btn btn-default pull-right',
        data: {confirm: "Are you sure that you want to delete this external repository?"} %>
      </div>
    </td>
  </tr>
  <% end %>
</table>
<% end %>
<div class='clearfix'>
  <%= link_to icon_text('fa-plus', 'New external repository'),
      new_app_blueprint_external_repositories_path(app_id: @app.name),
      remote: true, class: 'btn btn-default pull-right' %>
</div>
