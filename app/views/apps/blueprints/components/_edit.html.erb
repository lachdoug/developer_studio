<%= custom_form_for @app.blueprint.components,
      url: app_blueprint_components_path(app_id: @app.name) do |f| %>
  <%= f.input :path %>
  <%= f.input :extract, as: :boolean, wrapper: :horizontal_boolean %>
  <%= f.simple_fields_for :sources do |ff| %>
    <legend>Source <%= ff.index + 1 %></legend>
    <%= ff.input :label, required: true %>
    <%= ff.input :url, label: :URL, as: :url, required: true %>
    <div class="form-section-heading">Install script</div>
    <%= ff.simple_fields_for :install_script do |fff| %>
      <%= fff.input :language, as: :select, input_html: {class: 'ace-editor-language-select'}, collection: f.object.script_language_collection, include_blank: false, required: false %>
      <%= fff.input :content, as: :code, required: false, input_html: { data: { mode: fff.object.send(:language) } }  %>
    <% end %>
    <br>
    <div class='clearfix'>
      <%= link_to icon_text('fa-trash-o', "Delete source #{ff.index + 1}" ), app_blueprint_components_source_path(app_id: @app.name, id: ff.index), method: :delete, remote: true, class: 'btn btn-default pull-right', data: {confirm: "Are you sure that you want to delete this component source?"} %>
    </div>
    <hr>
  <% end %>
<% end %>
<div class='clearfix'>
  <%= link_to icon_text('fa-plus', 'New source'), new_app_blueprint_components_source_path(app_id: @app.name), remote: true, class: 'btn btn-default pull-right' %>
</div>
